<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1" />
  <meta name="keywords"
 content="shoal, glassfish, clustering, java ee, java, jxta, peer-to-peer, p2p, enterprise, group communication, jgroups, j2ee, framework, generic, pluggable, service provider, java-enterprise, networking, routing, multicast, reliable, replication, high availability, in-memory, fault tolerance, scalability, discovery, peer, peergroup, membership, groups, group management, distributed systems, distributed cache, cache, messaging, events, notifications, rendezvous" />
  <meta name="description"
 content="Shoal - A Generic Dynamic Clustering Framework for Group Membership, Reliability, Fault Tolerance and High Availability Systems" />
  <title>Shoal Java Clustering
Framework Overview</title>
  <script defer="defer" id="snap_preview_anywhere"
 type="text/javascript"
 src="http://spa.snap.com/snap_preview_anywhere.js?ap=1&amp;key=903354f56e911022a1f63b07a41ba43e&amp;sb=1&amp;domain=https://shoal.dev.java.net">
  </script>
</head>
<body>
<p style="margin-top: 0.17in; page-break-after: avoid;"><font
 face="Helvetica, sans-serif"><font style="font-size: 16pt;" size="4"><b>Shoal
&ndash; A Generic Clustering Framework</b></font></font></p>
<p style="margin-top: 0.17in; page-break-after: avoid;"><font
 face="Helvetica, sans-serif"><font size="4"><b>About
Shoal Framework</b></font></font></p>
<table border="0" cellpadding="1" cellspacing="1" width="100%">
  <tbody>
    <tr>
      <td rowspan="2" width="74%">
      <p><font face="Arial, sans-serif">Shoal is a java based
clustering framework that provides infrastructure to build fault
tolerance, reliability and availability. The framework can be plugged
into any product needing clustering and related distributed systems
capabilities without tightly binding to a specific communications
infrastructure. The framework can be plugged in as an in-process
component. The framework will have two broad categories of public APIs,
namely, a&nbsp; Client API, and a Group Communication Provider API.
The Client API will allow in-process client components to be notified
of cluster events and to send and receive messages to/from the group or
individual members. The Group Communication Provider API provides for
integration of any group transport technology such as <a
 href="http://www.jxta.org/">Grizzly</a>,
      <a href="http://www.jgroups.org/">JGroups</a>,
etc. as the underlying group communications provider. Our default
transport provider for Shoal 1.5.29 is based on Grizzly version 1.9.28.
The Framework thus provides a layer of abstraction for consuming
applications/products without tightly binding them to a specific group
communication system semantics and implementation. This allows
employing applications to simply call the framework's APIs for building
clustering and related enterprise distributed systems characteristics.
Shoal's design considerations, approach and programming model are
discussed in the <a href="ShoalDesignDocument.html">Shoal Design
Overview</a>
document. Please read this document to get an indepth understanding of
Shoal framework.</font></p>
      <p><font face="Arial, sans-serif">Shoal is a part of the <a
 href="https://glassfish.dev.java.net/">GlassFish</a>
Community.</font></p>
      </td>
      <td bgcolor="#e0dfe3" width="26%">
      <ul>
        <li><a
 href="http://www.glassfishwiki.org/gfwiki/attach/UserExperienceMeeting/ShoalJXTAKitchen11022006.pdf">Shoal
Overview Presentation </a></li>
        <li><a href="http://blogs.sun.com/main/tags/shoal">Shoal
Blog Entries</a>
          <ul>
          </ul>
        </li>
      </ul>
      </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
  </tbody>
</table>
<p style="margin-top: 0.17in; page-break-after: avoid;"><font
 face="Helvetica, sans-serif"><font style="font-size: 16pt;" size="4"><b>Shoal
Capabilities</b></font></font></p>
<p><font face="Arial, sans-serif">The Shoal Framework, written
in Java, can be used as an in-process component for cluster
communications and cluster event management. As an in-process
component, Shoal's core service, the Group Management Service (GMS),
provides the ability for the process (JVM) to become a communicating
member of a predefined cluster. As a result, within each process,
clients implementing Shoal's client API can get notifications of
cluster events. By becoming a communicating cluster member, the process
gets the ability to </font> </p>
<ul>
  <li>
    <p><font face="Arial, sans-serif">be notified of members'
joining, failures, and planned shutdowns among cluster members ( see <a
 href="ShoalGroupEventNotifications.html"
 name="Shoal Group Event Notifications" target="_blank"
 id="Shoal Group Event Notifications">Shoal Group
Event Notifications</a>), </font>
    </p>
  </li>
  <li>
    <p><font face="Arial, sans-serif">be notified of the process's
selection as a recovery member for any recovery operations on another
member on occurrence that other member's failure. (see <a
 href="ShoalAutomatedDelegatedRecoveryInitiation.html"
 name="Shoal Automated Delegated Recovery Initiation" target="_blank"
 id="Shoal Automated Delegated Recovery Initiation">Shoal
Automated Delegated Recovery Initiation</a>),
    </font> </p>
  </li>
  <li>
    <p><font face="Arial, sans-serif">check, while joining, if any
other process in the cluster is performing any recovery operations on
its resources (see <a
 href="ShoalAutomatedDelegatedRecoveryInitiation.html"
 name="Shoal Protective Fencing" id="Shoal Protective Fencing">Shoal
Automated Delegated Recovery Initiation</a>),</font></p>
  </li>
  <li>
    <p><font face="Arial, sans-serif">receive messages sent by one
or more members directly to it or to the group as a whole (see <a
 href="ShoalMessaging.html" name="Shoal Messaging" id="Shoal Messaging">Shoal
Messaging</a>)
and </font> </p>
  </li>
  <li>
    <p><font face="Arial, sans-serif">send messages to the group
as a whole or a particular member (see <a href="ShoalMessaging.html"
 name="Shoal Messaging" id="Shoal Messaging">Shoal Messaging</a>)
    </font> </p>
  </li>
</ul>
<p style="margin-top: 0.17in; page-break-after: avoid;"><font
 face="Arial, sans-serif"><font size="3"><b><font size="4"><font
 face="Helvetica, sans-serif">Membership in Multiple
Groups</font></font></b>
</font></font></p>
<p><font face="Arial, sans-serif">A single process can be a
member of multiple groups to represent different groups. For example,
the instance could participate in the pre-defined cluster that
encompasses all cluster members while also participating in a different
group, say, a replication group that represents a sub-group of members
in that cluster to which this member would replicate its state to. For
each such group, GroupManagementService instances will be created
within the process and these will be independent of each other. </font>
</p>
<p style="margin-top: 0.17in; page-break-after: avoid;"><font
 face="Helvetica, sans-serif"><font size="4"><b>Core
and Spectator Member Roles</b></font></font></p>
<p><font face="Arial, sans-serif">A member can participate in
a group either as a core member or as a spectator member. If configured
to participate as a Core member, then that member's failure would be
notified to all other members. If configured to participate as a
Spectator, then the spectator member's failure will not be notified to
all other members, however, the spectator member would receive all
notifications pertaining to other Core members. This is useful for
non-cluster processes such as an administration server, to be part of a
defined group to get the advantages of the various notifications and
messages described in the previous paragraph. Typically, this is useful
for monitoring or administrative infrastructures in that the ability to
communicate and receive notifications allows such non-cluster members
to effect configuration changes based on certain group events and also
send out meaningful messages to listening endpoints in the group.</font></p>
<p style="margin-top: 0.17in; page-break-after: avoid;"><font
 face="Helvetica, sans-serif"><font size="4"><b>Shoal
GMS Use Cases</b></font></font></p>
<p><font face="Arial, sans-serif">Some real use cases are
listed here. Note that these are not exhaustive and the extent to which
GMS could be used is only limited by imagination.</font></p>
<ul>
  <li>
    <p style="margin-bottom: 0in;"><font face="Arial, sans-serif">In a
Java EE (J2EE)
environment, transaction service reliability can be significantly
improved in a cluster setting, by using delegated recovery initiation
notification that automatically picks another cluster member to perform
recovery operations and notifies that member's transaction service to
recover transactions from the failed member's transaction
logs.&nbsp; Contrast this with manual transaction recovery which
depends on availability of administrative personnel to perform the job.</font>
    </p>
  </li>
  <li>
    <p style="margin-bottom: 0in;"><font face="Arial, sans-serif">Another
example in the Java
EE environment is IIOP Failover. With GMS, the ORB layer can now be
dynamically notified of member failures, planned shutdowns and joins,
thereby allowing the list of IOR addresses to be updated out-of-band to
IIOP clients. This allows for better failover scenario compared to a
static loadbalancer list wherein failover entails moving from one
address to another until a live instance
is found.</font> </p>
  </li>
  <li>
    <p style="margin-bottom: 0in;"><font face="Arial, sans-serif">The
same idea as the IIOP
Failover applies to Http-based software Loadbalancers. By having GMS as
an inprocess component and partipating as a Spectator, the loadbalancer
can determine availability or lack thereof of any member in the
cluster. </font> </p>
  </li>
  <li>
    <p style="margin-bottom: 0in;"><font face="Arial, sans-serif">Read-only
and read-mostly
beans on various instances in a cluster can be notified when a cache
update is discovered by one of the instances. The notification can be
done through GMS's messaging API. </font>
    </p>
  </li>
  <li>
    <p style="margin-bottom: 0in;"><font face="Arial, sans-serif">Monitoring
Clients/Agents
can now participate in the cluster as Spectator members and be notified
of cluster instance lifecycle events. One can also build more
monitoring information on top of GMS notifications in terms of load
factors on an instance prior to failure so that appropriate service
provisioning can be made. </font> </p>
  </li>
  <li>
    <p><font face="Arial, sans-serif">Dynamic Provisioning
services can take advantage of GMS thereby taking appropriate actions
of providing more resources on occurence of failures depending on load
conditions. </font> </p>
  </li>
</ul>
<p style="margin-top: 0.17in; page-break-after: avoid;"><font
 color="#000000"><font face="Helvetica, sans-serif"><font size="4"><b>Acknowledgements</b></font></font></font></p>
<p><font color="#000000"><font face="Arial, sans-serif">We would like
to acknowledge
and thank the design contributions of our colleague </font><a
 href="http://weblogs.java.net/blog/mortazavi/"><font
 face="Arial, sans-serif">Masood Mortazavi</font></a><font
 face="Arial, sans-serif">, who played a major role in
the initial design phases of this project. Masood's prior experiences
influenced our thought and learning processes in building this
framework to its current state. </font></font>
</p>
<p><font color="#000000"><font face="Arial, sans-serif">We would like
to thank the
Sun Java System Application Server Architecture (asarch) Committee for
their support, critique and guidance in clarifying requirements from
the Sun Java System Application Server perspectives. </font></font>
</p>
<p><font color="#000000"><font face="Arial, sans-serif">We would also
like to thank
the quality team at the application server group who built distributed
testing environments, ran several test suites on our development
efforts, and helped fix several significant issues that manifested only
in specific distributed settings.</font></font></p>
<p><br />
<br />
<br />
</p>
<!-- Start of StatCounter Code -->
<script type="text/javascript" language="javascript">
var sc_project=1946047; var sc_invisible=1; var sc_partition=17; var sc_security="757c102e"; </script>
<script type="text/javascript" language="javascript"
 src="http://www.statcounter.com/counter/counter.js">
</script>
<noscript><a
href="http://www.statcounter.com/" target="_blank"><img
src="http://c18.statcounter.com/counter.php?sc_project=1946047&java=0&security=757c102e&invisible=1"
alt="statistics" border="0"></a> </noscript>
<!-- End of StatCounter Code -->
</body>
</html>
